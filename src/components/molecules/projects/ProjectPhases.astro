---
const { 
  titleMethodology, 
  phases, 
  boxPhases,
  backgroundColorContainer = 'var(--color-blue-light)',
  directionColumn = false,
  subtitle = ''
  } = Astro.props;

import BoxPhase from './BoxPhase.astro';
import PhaseContainer from './PhaseContainer.astro';

---

<section id="phases-container" class="project-phases project-phase__extended">
  <h3 class="project-phases__title">{titleMethodology}</h3>
  {subtitle && <p  class="project-phases__subtitle">{subtitle}</p>}
  <div class="project-phases__box-container">
    {boxPhases.map((boxPhase:any) => (
      <BoxPhase 
        color={boxPhase.color}
        icon={boxPhase.icon} 
        text={boxPhase.text} />
    ))}
  </div>
  {phases.map((phase:any, index: number) => (
    <PhaseContainer
    title={phase.title}
    text={phase.text}
    text2={phase.text2}
    color={backgroundColorContainer}
    titleWrapper={phase.titleWrapper}
    reverse={phase.reverse}
    directionColumn={directionColumn}>
      {index === 0 && <slot name="phase1" />}
      {index === 1 && <slot name="phase2" />}
      {index === 2 && <slot name="phase3" />}
      {index === 3 && <slot name="phase4" />}    
      {index === 4 && <slot name="phase5" />}    

    </PhaseContainer>
  ))}
</section>

<style lang="scss" scoped>

.project-phases {
  width: 100%;
  overflow: hidden;
  max-height: 0;
  opacity: 0;
  padding-inline: 4.5rem;
  transition: 
    max-height 1.65s cubic-bezier(0.25, 0.8, 0.25, 1),
    opacity 1.65s cubic-bezier(0.25, 0.8, 0.25, 1);

  &__title {
    font-size: $font-size-xl;
    font-weight: 500;
    font-family: $font-poppins;
  }

  &__subtitle {
    font-size: $font-size-md;
    font-weight: 400;
    font-family: $font-poppins;
    margin-top: 1rem;
  }

  &__box-container {
    display: flex;
    gap: 4rem;
    justify-content: center;
    margin-bottom: 5rem;
    margin-top: 5rem;

    @media (max-width: 768px) {
      display: grid;
      grid-template-columns: repeat(2, 1fr); 
      gap: 1rem;
      
    }
  }


  @media (max-width: 768px) {
    padding-inline: 2rem;
  }
}

.show {
  max-height: 100%;
  opacity: 1;
}

</style>
